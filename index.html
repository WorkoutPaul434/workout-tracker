<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workout Tracker</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        * {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
        }
        
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #0f0f0f 0%, #1a1a1a 100%);
            min-height: 100vh;
            color: white;
            overflow-x: hidden;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);
        }
        
        .glass-effect {
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(220, 38, 38, 0.2);
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(220, 38, 38, 0.2);
        }
        
        .glow {
            box-shadow: 0 0 20px rgba(220, 38, 38, 0.3);
        }
        
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .mobile-safe {
            padding-bottom: env(safe-area-inset-bottom);
        }
        
        input:focus, select:focus {
            outline: none;
            ring: 2px solid #dc2626;
        }
        
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        
        const WorkoutTracker = () => {
            const [currentDate, setCurrentDate] = useState(new Date());
            const [activeTab, setActiveTab] = useState('workout');
            const [selectedDay, setSelectedDay] = useState('monday');
            const [isPeaking, setIsPeaking] = useState(false);
            const [peakingWeek, setPeakingWeek] = useState(1);
            
            // One Rep Max state
            const [oneRepMaxes, setOneRepMaxes] = useState({
                bench: 102,
                deadlift: 143,
                squat: 125
            });

            // Progress tracking state
            const [workoutHistory, setWorkoutHistory] = useState([]);
            const [currentWorkout, setCurrentWorkout] = useState({});

            // Workout structure
            const workoutPlan = {
                monday: {
                    name: "Push (Bench Focus)",
                    emoji: "üí™",
                    exercises: [
                        { name: "Barbell Bench Press", sets: "1 top single @ 85-90%, then 3x5-8 @ 75-80%", lift: "bench" },
                        { name: "Pec Fly (Machine or DB)", sets: "2x8-10", lift: null },
                        { name: "Seated DB Shoulder Press", sets: "2x6-8", lift: null },
                        { name: "Lateral Raises", sets: "3x10-12", lift: null },
                        { name: "Triceps Pushdowns", sets: "2x8-10", lift: null }
                    ]
                },
                tuesday: {
                    name: "Pull (Speed Deadlift & Back)",
                    emoji: "üî•",
                    exercises: [
                        { name: "Speed Deadlifts", sets: "4x2 @ 65-70%", lift: "deadlift" },
                        { name: "Weighted Pull-Ups", sets: "3x6-8", lift: null },
                        { name: "Chest-Supported T-Bar Row", sets: "2x6-8", lift: null },
                        { name: "Narrow Cable Row", sets: "2x8-10", lift: null },
                        { name: "Incline Cable Curls", sets: "2x8-10", lift: null },
                        { name: "Cable Hammer Curls", sets: "1x8-10", lift: null }
                    ]
                },
                wednesday: {
                    name: "Legs (Quad Focus)",
                    emoji: "ü¶µ",
                    exercises: [
                        { name: "Back Squat", sets: "1 top single @ 85-88%, then 3x5-6 @ 80-85%", lift: "squat" },
                        { name: "Lying Leg Curl", sets: "3x8-10", lift: null },
                        { name: "Romanian Deadlift (RDL)", sets: "3x6-8", lift: null },
                        { name: "Standing Calf Raises", sets: "3x10-12", lift: null },
                        { name: "Adductors", sets: "2x10-12", lift: null },
                        { name: "Abductors", sets: "2x10-12", lift: null },
                        { name: "Leg Extensions (optional)", sets: "2x10-12", lift: null }
                    ]
                },
                friday: {
                    name: "Upper (Incline & Bench)",
                    emoji: "üí•",
                    exercises: [
                        { name: "Incline DB Press", sets: "2x6-8 (last set to failure)", lift: null },
                        { name: "Paused Flat Bench Press", sets: "1 top single @ 85%, then 2x5-7 @ 75%", lift: "bench" },
                        { name: "Neutral Grip Pull-Ups", sets: "3x6-8", lift: null },
                        { name: "Chest Supported Row", sets: "2x8-10", lift: null },
                        { name: "Lateral Raises", sets: "2x10-12", lift: null },
                        { name: "Overhead Triceps Extensions", sets: "2x8-10", lift: null },
                        { name: "Preacher or Incline DB Curls", sets: "2x8-10", lift: null }
                    ]
                },
                saturday: {
                    name: "Lower (Heavy Deadlift)",
                    emoji: "‚ö°",
                    exercises: [
                        { name: "Deadlift", sets: "1 top single @ 85-90%, then 2-3x5 @ 75-80%", lift: "deadlift" },
                        { name: "Hack Squat or Safety Bar Squat", sets: "3x6-8", lift: null },
                        { name: "Back Extensions/Good Mornings", sets: "3x8-10", lift: null },
                        { name: "Standing Calf Raises", sets: "3x10-12", lift: null },
                        { name: "Lying Leg Curl", sets: "2x8-10", lift: null }
                    ]
                }
            };

            // Calculate weight based on percentage
            const calculateWeight = (lift, percentage) => {
                const oneRM = oneRepMaxes[lift];
                return Math.round((oneRM * percentage / 100) * 4) / 4;
            };

            // Parse sets and add calculated weights
            const parseExerciseWithWeights = (exercise) => {
                if (!exercise.lift) return exercise.sets;
                
                let parsedSets = exercise.sets;
                
                const patterns = [
                    /(\d+-\d+)%/g,
                    /(\d+)%/g
                ];
                
                patterns.forEach(pattern => {
                    parsedSets = parsedSets.replace(pattern, (match, percentage) => {
                        if (percentage.includes('-')) {
                            const [min, max] = percentage.split('-').map(Number);
                            const minWeight = calculateWeight(exercise.lift, min);
                            const maxWeight = calculateWeight(exercise.lift, max);
                            return `${percentage}% (${minWeight}-${maxWeight}kg)`;
                        } else {
                            const weight = calculateWeight(exercise.lift, parseInt(percentage));
                            return `${percentage}% (${weight}kg)`;
                        }
                    });
                });
                
                return parsedSets;
            };

            // Get current day's workout
            const getCurrentDayName = () => {
                const days = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];
                return days[currentDate.getDay()];
            };

            const isRestDay = (day) => {
                return day === 'thursday' || day === 'sunday';
            };

            // Set current day on load
            useEffect(() => {
                const today = getCurrentDayName();
                if (!isRestDay(today)) {
                    setSelectedDay(today);
                }
            }, []);

            const saveWorkout = () => {
                const today = currentDate.toISOString().split('T')[0];
                const workoutKey = `${today}-${selectedDay}`;
                
                if (currentWorkout[workoutKey]) {
                    setWorkoutHistory(prev => [...prev, {
                        date: today,
                        day: selectedDay,
                        workout: workoutPlan[selectedDay].name,
                        exercises: currentWorkout[workoutKey]
                    }]);
                    
                    setCurrentWorkout(prev => ({
                        ...prev,
                        [workoutKey]: undefined
                    }));
                }
            };

            const getPeakingModifications = (exercise, week) => {
                if (!exercise.lift) return exercise.sets;
                
                switch (week) {
                    case 1:
                        if (exercise.name.includes('Bench Press') || exercise.name.includes('Deadlift') || exercise.name.includes('Squat')) {
                            return exercise.sets.replace(/85-90%|85-88%/, '88-90%').replace(/3x5-8|3x5-6|2-3x5/, '2x4') + ' (Heavy Practice)';
                        }
                        return exercise.sets;
                    case 2:
                        if (exercise.name.includes('Bench Press') || exercise.name.includes('Deadlift') || exercise.name.includes('Squat')) {
                            return exercise.sets.replace(/85-90%|85-88%/, '92-94%').replace(/3x5-8|3x5-6|2-3x5/, '1x3') + ' (Volume Drop)';
                        }
                        return exercise.sets;
                    case 3:
                        if (exercise.name.includes('Bench Press') || exercise.name.includes('Deadlift') || exercise.name.includes('Squat')) {
                            return 'Max Week - Test 1RM (Fri/Sat)';
                        }
                        return 'Technique sets: 3x2 @ 60-65%';
                    default:
                        return exercise.sets;
                }
            };

            return (
                <div className="min-h-screen bg-gray-900 mobile-safe">
                    {/* Header */}
                    <div className="sticky top-0 z-50 glass-effect border-b border-red-600/30">
                        <div className="max-w-7xl mx-auto px-4 py-4">
                            <div className="flex items-center justify-between">
                                <div className="flex items-center space-x-3">
                                    <div className="w-10 h-10 gradient-bg rounded-xl flex items-center justify-center glow">
                                        <span className="text-xl font-bold">üí™</span>
                                    </div>
                                    <h1 className="text-xl md:text-2xl font-bold text-white">Workout Tracker</h1>
                                </div>
                                <div className="text-sm text-gray-300 hidden sm:block">
                                    {currentDate.toLocaleDateString('en-US', { 
                                        weekday: 'short', 
                                        month: 'short', 
                                        day: 'numeric' 
                                    })}
                                </div>
                            </div>
                            
                            {/* Navigation */}
                            <div className="flex space-x-1 mt-4 overflow-x-auto scrollbar-hide">
                                {[
                                    { id: 'workout', label: 'Workout', icon: 'üéØ' },
                                    { id: 'progress', label: 'Progress', icon: 'üìà' },
                                    { id: 'settings', label: 'Settings', icon: '‚öôÔ∏è' }
                                ].map(tab => (
                                    <button
                                        key={tab.id}
                                        onClick={() => setActiveTab(tab.id)}
                                        className={`flex items-center space-x-2 px-4 py-2 rounded-xl font-medium transition-all whitespace-nowrap ${
                                            activeTab === tab.id 
                                                ? 'gradient-bg text-white glow' 
                                                : 'text-gray-300 hover:text-white hover:bg-gray-800/50'
                                        }`}
                                    >
                                        <span>{tab.icon}</span>
                                        <span className="text-sm md:text-base">{tab.label}</span>
                                    </button>
                                ))}
                            </div>
                        </div>
                    </div>

                    <div className="max-w-7xl mx-auto px-4 py-6 space-y-6">
                        {/* Workout Tab */}
                        {activeTab === 'workout' && (
                            <>
                                {/* Weekly Overview */}
                                <div className="glass-effect rounded-2xl p-4 md:p-6 card-hover">
                                    <h2 className="text-lg font-semibold mb-4 flex items-center text-white">
                                        <span className="mr-2">üìÖ</span>
                                        Weekly Split
                                    </h2>
                                    <div className="grid grid-cols-2 sm:grid-cols-7 gap-2">
                                        {['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'].map((day) => {
                                            const dayKey = day.toLowerCase();
                                            const isToday = getCurrentDayName() === dayKey;
                                            const isRest = isRestDay(dayKey);
                                            const workout = workoutPlan[dayKey];
                                            
                                            return (
                                                <div
                                                    key={day}
                                                    className={`p-3 rounded-xl text-center cursor-pointer transition-all transform hover:scale-105 ${
                                                        selectedDay === dayKey
                                                            ? 'gradient-bg border-2 border-red-400 text-white glow'
                                                            : isToday && !isRest
                                                            ? 'bg-red-800/50 border-2 border-red-600 text-white pulse-animation'
                                                            : isRest
                                                            ? 'bg-gray-800 border border-gray-600 text-gray-400'
                                                            : 'bg-gray-800 border border-gray-600 text-gray-300 hover:bg-gray-700'
                                                    }`}
                                                    onClick={() => !isRest && setSelectedDay(dayKey)}
                                                >
                                                    <div className="font-medium text-sm mb-1">{day.slice(0, 3)}</div>
                                                    <div className="text-xs">
                                                        {isRest ? 'üò¥ Rest' : (
                                                            <div>
                                                                <div className="text-lg mb-1">{workout.emoji}</div>
                                                                <div>{workout.name.split(' ')[0]}</div>
                                                            </div>
                                                        )}
                                                    </div>
                                                </div>
                                            );
                                        })}
                                    </div>
                                </div>

                                {/* Peaking Block Toggle */}
                                <div className="glass-effect rounded-2xl p-4 md:p-6 card-hover">
                                    <div className="flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-3 sm:space-y-0">
                                        <h3 className="text-lg font-semibold text-white flex items-center">
                                            <span className="mr-2">üéØ</span>
                                            Training Mode
                                        </h3>
                                        <div className="flex flex-col sm:flex-row items-start sm:items-center space-y-3 sm:space-y-0 sm:space-x-4">
                                            <label className="flex items-center">
                                                <input
                                                    type="checkbox"
                                                    checked={isPeaking}
                                                    onChange={(e) => setIsPeaking(e.target.checked)}
                                                    className="w-5 h-5 rounded border-gray-600 text-red-600 focus:ring-red-500 bg-gray-800"
                                                />
                                                <span className="ml-2 text-sm font-medium text-white">Peaking Block</span>
                                            </label>
                                            {isPeaking && (
                                                <select
                                                    value={peakingWeek}
                                                    onChange={(e) => setPeakingWeek(parseInt(e.target.value))}
                                                    className="border border-gray-600 rounded-xl px-3 py-2 text-sm bg-gray-800 text-white focus:ring-2 focus:ring-red-500"
                                                >
                                                    <option value={1}>Week 1 - Heavy Practice</option>
                                                    <option value={2}>Week 2 - Volume Drop</option>
                                                    <option value={3}>Week 3 - Max Week</option>
                                                </select>
                                            )}
                                        </div>
                                    </div>
                                    {isPeaking && (
                                        <div className="bg-red-900/50 border border-red-700/50 rounded-xl p-4">
                                            <p className="text-sm text-red-100">
                                                {peakingWeek === 1 && "üî• Heavy Practice: Top single @ 88-90%, reduce volume slightly"}
                                                {peakingWeek === 2 && "‚ö° Volume Drop: Top single @ 92-94%, skip some accessory sets"}
                                                {peakingWeek === 3 && "üèÜ Max Week: Light technique work Mon-Wed, test 1RM Fri/Sat"}
                                            </p>
                                        </div>
                                    )}
                                </div>

                                {/* Current Workout */}
                                {selectedDay && !isRestDay(selectedDay) && (
                                    <div className="glass-effect rounded-2xl p-4 md:p-6 card-hover">
                                        <div className="flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 space-y-3 sm:space-y-0">
                                            <div className="flex items-center space-x-3">
                                                <span className="text-2xl">{workoutPlan[selectedDay].emoji}</span>
                                                <h2 className="text-xl font-semibold text-white">
                                                    {workoutPlan[selectedDay].name}
                                                </h2>
                                            </div>
                                            <button
                                                onClick={saveWorkout}
                                                className="gradient-bg text-white px-6 py-3 rounded-xl hover:scale-105 transition-all glow flex items-center space-x-2"
                                            >
                                                <span>‚úÖ</span>
                                                <span>Complete Workout</span>
                                            </button>
                                        </div>

                                        <div className="space-y-4">
                                            {workoutPlan[selectedDay].exercises.map((exercise, index) => {
                                                const displaySets = isPeaking 
                                                    ? getPeakingModifications(exercise, peakingWeek)
                                                    : parseExerciseWithWeights(exercise);
                                                
                                                return (
                                                    <div key={index} className="border border-red-600/30 rounded-xl p-4 bg-gray-800/50 hover:bg-gray-800/70 transition-all">
                                                        <div className="flex flex-col sm:flex-row items-start sm:items-center justify-between mb-3 space-y-2 sm:space-y-0">
                                                            <h3 className="font-medium text-white text-lg">{exercise.name}</h3>
                                                            {exercise.lift && (
                                                                <span className="text-xs gradient-bg text-white px-3 py-1 rounded-full">
                                                                    {exercise.lift.toUpperCase()}
                                                                </span>
                                                            )}
                                                        </div>
                                                        <p className="text-sm text-gray-300 mb-4 font-mono bg-gray-900/50 p-3 rounded-lg">
                                                            {displaySets}
                                                        </p>
                                                        
                                                        {/* Set tracking inputs */}
                                                        <div className="grid grid-cols-1 sm:grid-cols-2 gap-3">
                                                            {[1, 2, 3, 4].map(setNum => (
                                                                <div key={setNum} className="flex space-x-2">
                                                                    <input
                                                                        type="number"
                                                                        placeholder="Weight (kg)"
                                                                        step="0.25"
                                                                        className="flex-1 px-3 py-2 border border-gray-600 rounded-lg text-sm bg-gray-900 text-white placeholder-gray-500 focus:ring-2 focus:ring-red-500"
                                                                    />
                                                                    <input
                                                                        type="number"
                                                                        placeholder="Reps"
                                                                        className="w-16 px-3 py-2 border border-gray-600 rounded-lg text-sm bg-gray-900 text-white placeholder-gray-500 focus:ring-2 focus:ring-red-500"
                                                                    />
                                                                    <button className="px-3 py-2 gradient-bg hover:scale-105 rounded-lg text-sm text-white transition-all">
                                                                        ‚úì
                                                                    </button>
                                                                </div>
                                                            ))}
                                                        </div>
                                                    </div>
                                                );
                                            })}
                                        </div>
                                    </div>
                                )}

                                {selectedDay && isRestDay(selectedDay) && (
                                    <div className="glass-effect rounded-2xl p-8 text-center card-hover">
                                        <div className="text-6xl mb-4">üò¥</div>
                                        <h2 className="text-2xl font-semibold mb-3 text-white">Rest Day</h2>
                                        <p className="text-gray-300">Take a well-deserved break and let your muscles recover!</p>
                                    </div>
                                )}
                            </>
                        )}

                        {/* Progress Tab */}
                        {activeTab === 'progress' && (
                            <div className="glass-effect rounded-2xl p-4 md:p-6 card-hover">
                                <h2 className="text-lg font-semibold mb-4 flex items-center text-white">
                                    <span className="mr-2">üìä</span>
                                    Workout History
                                </h2>
                                {workoutHistory.length === 0 ? (
                                    <div className="text-center py-12">
                                        <div className="text-6xl mb-4">üìà</div>
                                        <p className="text-gray-400 text-lg">
                                            No workouts completed yet.<br/>Start tracking your progress!
                                        </p>
                                    </div>
                                ) : (
                                    <div className="space-y-3">
                                        {workoutHistory.slice(-10).reverse().map((workout, index) => (
                                            <div key={index} className="border border-red-600/30 rounded-xl p-4 bg-gray-800/50 hover:bg-gray-800/70 transition-all">
                                                <div className="flex flex-col sm:flex-row items-start sm:items-center justify-between space-y-2 sm:space-y-0">
                                                    <div>
                                                        <h3 className="font-medium text-white flex items-center">
                                                            <span className="mr-2">üèãÔ∏è</span>
                                                            {workout.workout}
                                                        </h3>
                                                        <p className="text-sm text-gray-400">{workout.date}</p>
                                                    </div>
                                                    <div className="text-sm text-gray-300">
                                                        {Object.keys(workout.exercises).length} exercises completed
                                                    </div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                )}
                            </div>
                        )}

                        {/* Settings Tab */}
                        {activeTab === 'settings' && (
                            <div className="space-y-6">
                                <div className="glass-effect rounded-2xl p-4 md:p-6 card-hover">
                                    <h2 className="text-lg font-semibold mb-6 text-white flex items-center">
                                        <span className="mr-2">üéØ</span>
                                        One Rep Max Settings
                                    </h2>
                                    <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                                        {Object.entries(oneRepMaxes).map(([lift, max]) => (
                                            <div key={lift} className="space-y-2">
                                                <label className="block text-sm font-medium text-gray-300 capitalize flex items-center">
                                                    <span className="mr-2">
                                                        {lift === 'bench' ? 'üèãÔ∏è' : lift === 'deadlift' ? '‚ö°' : 'ü¶µ'}
                                                    </span>
                                                    {lift} 1RM (kg)
                                                </label>
                                                <input
                                                    type="number"
                                                    step="0.25"
                                                    value={max}
                                                    onChange={(e) => setOneRepMaxes(prev => ({
                                                        ...prev,
                                                        [lift]: parseFloat(e.target.value) || 0
                                                    }))}
                                                    className="w-full px-4 py-3 border border-gray-600 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-red-500 bg-gray-800 text-white text-lg font-semibold"
                                                />
                                            </div>
                                        ))}
                                    </div>
                                    
                                    <div className="mt-8 p-6 bg-gray-900/70 rounded-xl border border-red-600/20">
                                        <h3 className="font-medium mb-4 text-white flex items-center">
                                            <span className="mr-2">üßÆ</span>
                                            Calculated Working Weights
                                        </h3>
                                        <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                                            {Object.entries(oneRepMaxes).map(([lift, max]) => (
                                                <div key={lift} className="space-y-2">
                                                    <div className="font-medium capitalize text-red-400 flex items-center">
                                                        <span className="mr-2">
                                                            {lift === 'bench' ? 'üèãÔ∏è' : lift === 'deadlift' ? '‚ö°' : 'ü¶µ'}
                                                        </span>
                                                        {lift}
                                                    </div>
                                                    <div className="space-y-1 text-sm">
                                                        <div className="flex justify-between text-gray-300">
                                                            <span>65%:</span>
                                                            <span className="font-mono font-semibold">{calculateWeight(lift, 65)}kg</span>
                                                        </div>
                                                        <div className="flex justify-between text-gray-300">
                                                            <span>75%:</span>
                                                            <span className="font-mono font-semibold">{calculateWeight(lift, 75)}kg</span>
                                                        </div>
                                                        <div className="flex justify-between text-gray-300">
                                                            <span>85%:</span>
                                                            <span className="font-mono font-semibold">{calculateWeight(lift, 85)}kg</span>
                                                        </div>
                                                        <div className="flex justify-between text-gray-300">
                                                            <span>90%:</span>
                                                            <span className="font-mono font-semibold">{calculateWeight(lift, 90)}kg</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        ReactDOM.render(<WorkoutTracker />, document.getElementById('root'));
