<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Workout Tracker</title>
  <!-- Tailwind CSS via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- React and ReactDOM via CDN -->
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <!-- Babel for JSX support -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body class="bg-black">
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect } = React;

    const LOCAL_STORAGE_KEYS = {
      activeTab: 'workout-tracker-activeTab',
      selectedDay: 'workout-tracker-selectedDay',
      oneRepMaxes: 'workout-tracker-oneRepMaxes',
      workoutData: 'workout-tracker-workoutData',
      workoutHistory: 'workout-tracker-workoutHistory',
    };

    function WorkoutTracker() {
      const [activeTab, setActiveTab] = useState('workout');
      const [selectedDay, setSelectedDay] = useState('monday');
      const [oneRepMaxes, setOneRepMaxes] = useState({ bench: 102, deadlift: 143, squat: 125 });
      const [workoutData, setWorkoutData] = useState({});
      const [workoutHistory, setWorkoutHistory] = useState([]);

      const workoutPlan = {
        monday: {
          name: "Push Day",
          emoji: "üí™",
          exercises: [
            { name: "Bench Press", sets: "1x85-90% + 3x5-8@75-80%", lift: "bench" },
            { name: "Pec Fly", sets: "2x8-10", lift: null },
            { name: "Shoulder Press", sets: "2x6-8", lift: null },
            { name: "Lateral Raises", sets: "3x10-12", lift: null },
            { name: "Triceps", sets: "2x8-10", lift: null }
          ]
        },
        tuesday: {
          name: "Pull Day",
          emoji: "üî•",
          exercises: [
            { name: "Speed Deadlift", sets: "4x2@65-70%", lift: "deadlift" },
            { name: "Pull-Ups", sets: "3x6-8", lift: null },
            { name: "T-Bar Row", sets: "2x6-8", lift: null },
            { name: "Cable Row", sets: "2x8-10", lift: null },
            { name: "Curls", sets: "2x8-10", lift: null }
          ]
        },
        wednesday: {
          name: "Leg Day",
          emoji: "ü¶µ",
          exercises: [
            { name: "Back Squat", sets: "1x85-88% + 3x5-6@80-85%", lift: "squat" },
            { name: "Leg Curl", sets: "3x8-10", lift: null },
            { name: "RDL", sets: "3x6-8", lift: null },
            { name: "Calf Raises", sets: "3x10-12", lift: null }
          ]
        },
        friday: {
          name: "Upper Body",
          emoji: "üí•",
          exercises: [
            { name: "Incline Press", sets: "2x6-8", lift: null },
            { name: "Paused Bench", sets: "1x85% + 2x5-7@75%", lift: "bench" },
            { name: "Neutral Pull-Ups", sets: "3x6-8", lift: null },
            { name: "Chest Row", sets: "2x8-10", lift: null }
          ]
        },
        saturday: {
          name: "Lower Body",
          emoji: "‚ö°",
          exercises: [
            { name: "Deadlift", sets: "1x85-90% + 2-3x5@75-80%", lift: "deadlift" },
            { name: "Hack Squat", sets: "3x6-8", lift: null },
            { name: "Good Mornings", sets: "3x8-10", lift: null },
            { name: "Leg Curl", sets: "2x8-10", lift: null }
          ]
        }
      };

      const calculateWeight = (lift, percentage) => {
        const oneRM = oneRepMaxes[lift] || 100;
        return Math.round((oneRM * percentage / 100) * 4) / 4;
      };

      const parseExerciseWithWeights = (exercise) => {
        if (!exercise.lift) return exercise.sets;

        let parsed = exercise.sets;
        const patterns = [/(\d+-\d+)%/g, /(\d+)%/g];

        patterns.forEach(pattern => {
          parsed = parsed.replace(pattern, (match, percentage) => {
            if (percentage.includes('-')) {
              const parts = percentage.split('-');
              const min = parseInt(parts[0]);
              const max = parseInt(parts[1]);
              const minWeight = calculateWeight(exercise.lift, min);
              const maxWeight = calculateWeight(exercise.lift, max);
              return `${percentage}% (${minWeight}-${maxWeight}kg)`;
            } else {
              const weight = calculateWeight(exercise.lift, parseInt(percentage));
              return `${percentage}% (${weight}kg)`;
            }
          });
        });

        return parsed;
      };

      const getToday = () => {
        const today = new Date();
        return today.toISOString().split('T')[0];
      };

      const getTodayDay = () => {
        const days = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];
        const today = new Date();
        return days[today.getDay()];
      };

      const updateSet = (exerciseName, setIndex, field, value) => {
        const key = `${getToday()}-${selectedDay}-${exerciseName}-${setIndex}`;
        setWorkoutData(prev => {
          const updated = {
            ...prev,
            [key]: {
              ...prev[key],
              [field]: value
            }
          };
          localStorage.setItem(LOCAL_STORAGE_KEYS.workoutData, JSON.stringify(updated));
          return updated;
        });
      };

      const getSetValue = (exerciseName, setIndex, field) => {
        const key = `${getToday()}-${selectedDay}-${exerciseName}-${setIndex}`;
        const data = workoutData[key];
        return data && data[field] ? data[field] : '';
      };

      const completeSet = (exerciseName, setIndex) => {
        const key = `${getToday()}-${selectedDay}-${exerciseName}-${setIndex}`;
        const setInfo = workoutData[key];
        if (setInfo && setInfo.weight && setInfo.reps) {
          updateSet(exerciseName, setIndex, 'completed', true);
        }
      };

      const isSetCompleted = (exerciseName, setIndex) => {
        const key = `${getToday()}-${selectedDay}-${exerciseName}-${setIndex}`;
        const data = workoutData[key];
        return data && data.completed === true;
      };

      const saveWorkout = () => {
        const today = getToday();
        const completedSets = Object.keys(workoutData).filter(
          key =>
            key.startsWith(`${today}-${selectedDay}`) && workoutData[key] && workoutData[key].completed
        ).length;

        if (completedSets > 0) {
          const newWorkout = {
            date: today,
            day: selectedDay,
            workout: workoutPlan[selectedDay].name,
            completedSets: completedSets
          };

          setWorkoutHistory(prev => {
            const filtered = prev.filter(w => !(w.date === today && w.day === selectedDay));
            const updated = [...filtered, newWorkout];
            localStorage.setItem(LOCAL_STORAGE_KEYS.workoutHistory, JSON.stringify(updated));
            return updated;
          });

          alert(`Workout saved! ${completedSets} sets completed üí™`);
        } else {
          alert('Complete at least one set before saving!');
        }
      };

      // Load from localStorage on mount
      useEffect(() => {
        try {
          const savedActiveTab = localStorage.getItem(LOCAL_STORAGE_KEYS.activeTab);
          if (savedActiveTab) setActiveTab(savedActiveTab);

          const savedSelectedDay = localStorage.getItem(LOCAL_STORAGE_KEYS.selectedDay);
          if (savedSelectedDay) setSelectedDay(savedSelectedDay);

          const savedOneRepMaxes = localStorage.getItem(LOCAL_STORAGE_KEYS.oneRepMaxes);
          if (savedOneRepMaxes) setOneRepMaxes(JSON.parse(savedOneRepMaxes));

          const savedWorkoutData = localStorage.getItem(LOCAL_STORAGE_KEYS.workoutData);
          if (savedWorkoutData) setWorkoutData(JSON.parse(savedWorkoutData));

          const savedWorkoutHistory = localStorage.getItem(LOCAL_STORAGE_KEYS.workoutHistory);
          if (savedWorkoutHistory) setWorkoutHistory(JSON.parse(savedWorkoutHistory));
        } catch (e) {
          // ignore
        }
        if (!localStorage.getItem(LOCAL_STORAGE_KEYS.selectedDay)) {
          const today = getTodayDay();
          if (workoutPlan[today]) {
            setSelectedDay(today);
            localStorage.setItem(LOCAL_STORAGE_KEYS.selectedDay, today);
          }
        }
      }, []);

      // Persist state changes to localStorage
      useEffect(() => {
        localStorage.setItem(LOCAL_STORAGE_KEYS.activeTab, activeTab);
      }, [activeTab]);
      useEffect(() => {
        localStorage.setItem(LOCAL_STORAGE_KEYS.selectedDay, selectedDay);
      }, [selectedDay]);
      useEffect(() => {
        localStorage.setItem(LOCAL_STORAGE_KEYS.oneRepMaxes, JSON.stringify(oneRepMaxes));
      }, [oneRepMaxes]);
      useEffect(() => {
        localStorage.setItem(LOCAL_STORAGE_KEYS.workoutData, JSON.stringify(workoutData));
      }, [workoutData]);
      useEffect(() => {
        localStorage.setItem(LOCAL_STORAGE_KEYS.workoutHistory, JSON.stringify(workoutHistory));
      }, [workoutHistory]);

      return (
        <div className="min-h-screen bg-gradient-to-br from-black via-gray-900 to-red-950">
          {/* Header */}
          <div className="sticky top-0 z-50 backdrop-blur-xl bg-black/80 border-b border-red-500/20 shadow-2xl">
            <div className="px-4 py-3">
              <div className="flex items-center justify-between">
                <div className="flex items-center space-x-3">
                  <div className="w-12 h-12 bg-gradient-to-br from-red-500 via-red-600 to-red-700 rounded-2xl flex items-center justify-center shadow-xl border border-red-400/30">
                    <span className="text-2xl">üí™</span>
                  </div>
                  <div>
                    <h1 className="text-xl font-bold bg-gradient-to-r from-white to-red-100 bg-clip-text text-transparent">
                      Workout Tracker
                    </h1>
                    <p className="text-xs text-gray-400">
                      {new Date().toLocaleDateString('en-US', { weekday: 'long', month: 'short', day: 'numeric' })}
                    </p>
                  </div>
                </div>
                <div className="text-xs text-red-400 font-medium px-3 py-1 bg-red-950/50 rounded-full border border-red-500/30">
                  {workoutPlan[selectedDay]?.emoji} {workoutPlan[selectedDay]?.name}
                </div>
              </div>
              {/* Navigation */}
              <div className="flex space-x-1 mt-4 bg-gray-900/50 p-1 rounded-2xl backdrop-blur-sm">
                {[
                  { id: 'workout', label: 'Workout', icon: 'üéØ' },
                  { id: 'progress', label: 'Progress', icon: 'üìà' },
                  { id: 'settings', label: 'Settings', icon: '‚öôÔ∏è' }
                ].map(tab => (
                  <button
                    key={tab.id}
                    onClick={() => setActiveTab(tab.id)}
                    className={`flex-1 flex items-center justify-center space-x-2 px-4 py-3 rounded-xl font-semibold transition-all duration-300 text-sm ${
                      activeTab === tab.id 
                        ? 'bg-gradient-to-r from-red-500 to-red-600 text-white shadow-lg shadow-red-500/25 scale-105' 
                        : 'text-gray-300 hover:text-white hover:bg-gray-800/50'
                    }`}
                  >
                    <span className="text-base">{tab.icon}</span>
                    <span className="hidden sm:inline">{tab.label}</span>
                  </button>
                ))}
              </div>
            </div>
          </div>
          <div className="px-4 py-6 space-y-6 max-w-4xl mx-auto">
            {/* Workout Tab */}
            {activeTab === 'workout' && (
              <>
                {/* Day Selector */}
                <div className="bg-gradient-to-br from-gray-800/50 to-gray-900/50 backdrop-blur-xl rounded-3xl p-6 shadow-2xl border border-gray-700/50">
                  <h2 className="text-xl font-bold mb-4 flex items-center text-white">
                    <span className="mr-3 text-2xl">üìÖ</span>
                    Select Training Day
                  </h2>
                  <div className="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3">
                    {Object.entries(workoutPlan).map(([day, workout]) => {
                      const isToday = getTodayDay() === day;
                      const isSelected = selectedDay === day;
                      return (
                        <button
                          key={day}
                          onClick={() => setSelectedDay(day)}
                          className={`p-4 rounded-2xl text-center transition-all duration-300 transform hover:scale-105 ${
                            isSelected
                              ? 'bg-gradient-to-br from-red-500 to-red-600 text-white shadow-xl shadow-red-500/25 border border-red-400/50'
                              : isToday
                              ? 'bg-gradient-to-br from-red-900/40 to-red-800/40 border-2 border-red-500/50 text-white shadow-lg'
                              : 'bg-gradient-to-br from-gray-700/30 to-gray-800/30 text-gray-300 hover:bg-gray-600/50 border border-gray-600/30'
                          }`}
                        >
                          <div className="text-2xl mb-2">{workout.emoji}</div>
                          <div className="text-sm font-bold capitalize mb-1">{day}</div>
                          <div className="text-xs opacity-80">{workout.name}</div>
                          {isToday && <div className="text-xs mt-1 text-red-300 font-semibold">Today</div>}
                        </button>
                      );
                    })}
                  </div>
                </div>
                {/* Current Workout */}
                <div className="bg-gradient-to-br from-gray-800/50 to-gray-900/50 backdrop-blur-xl rounded-3xl p-6 shadow-2xl border border-gray-700/50">
                  <div className="flex items-center justify-between mb-6">
                    <div className="flex items-center space-x-4">
                      <div className="w-16 h-16 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl flex items-center justify-center text-3xl shadow-xl">
                        {workoutPlan[selectedDay].emoji}
                      </div>
                      <div>
                        <h2 className="text-2xl font-bold text-white">{workoutPlan[selectedDay].name}</h2>
                        <p className="text-gray-400 capitalize">{selectedDay}</p>
                      </div>
                    </div>
                    <button
                      onClick={saveWorkout}
                      className="bg-gradient-to-r from-green-500 to-green-600 text-white px-6 py-3 rounded-2xl font-bold shadow-xl shadow-green-500/25 hover:shadow-green-500/40 transition"
                    >
                      <span>üíæ</span>
                      <span>Save</span>
                    </button>
                  </div>
                  <div className="space-y-4">
                    {workoutPlan[selectedDay].exercises.map((exercise, index) => (
                      <div key={index} className="bg-gradient-to-r from-gray-900/60 to-gray-800/60 rounded-2xl p-5 border border-gray-600/30 backdrop-blur-sm">
                        <div className="flex items-center justify-between mb-3">
                          <h3 className="text-lg font-semibold text-white">{exercise.name}</h3>
                          {exercise.lift && (
                            <span className="text-xs bg-gradient-to-r from-red-500 to-red-600 text-white px-3 py-1 rounded-full font-bold shadow-lg">
                              {exercise.lift.toUpperCase()}
                            </span>
                          )}
                        </div>
                        <div className="bg-black/40 p-3 rounded-xl mb-4 border border-gray-700/50">
                          <p className="text-sm text-gray-300 font-mono leading-relaxed">
                            {parseExerciseWithWeights(exercise)}
                          </p>
                        </div>
                        {/* Sets */}
                        <div className="space-y-3">
                          {[1, 2, 3].map(setNum => (
                            <div key={setNum} className={`flex items-center space-x-3 p-3 rounded-xl transition-all duration-300 ${
                              isSetCompleted(exercise.name, setNum)
                                ? 'bg-gradient-to-r from-green-900/40 to-green-800/40 border border-green-500/50 shadow-lg'
                                : 'bg-gray-800/50 border border-gray-600/30'
                            }`}>
                              <div className="w-8 h-8 bg-gray-700 rounded-lg flex items-center justify-center text-sm font-bold text-gray-300">
                                {setNum}
                              </div>
                              <input
                                type="number"
                                placeholder="Weight (kg)"
                                step="0.25"
                                value={getSetValue(exercise.name, setNum, 'weight')}
                                onChange={(e) => updateSet(exercise.name, setNum, 'weight', e.target.value)}
                                className="flex-1 px-4 py-3 bg-black/50 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:border-red-500 focus:ring-2 focus:ring-red-500/20 font-mono"
                                disabled={isSetCompleted(exercise.name, setNum)}
                              />
                              <input
                                type="number"
                                placeholder="Reps"
                                value={getSetValue(exercise.name, setNum, 'reps')}
                                onChange={(e) => updateSet(exercise.name, setNum, 'reps', e.target.value)}
                                className="w-20 px-4 py-3 bg-black/50 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:border-red-500 focus:ring-2 focus:ring-red-500/20 font-mono"
                                disabled={isSetCompleted(exercise.name, setNum)}
                              />
                              <button
                                onClick={() => completeSet(exercise.name, setNum)}
                                disabled={isSetCompleted(exercise.name, setNum)}
                                className={`w-12 h-12 rounded-xl font-bold transition-all duration-300 flex items-center justify-center ${
                                  isSetCompleted(exercise.name, setNum)
                                    ? 'bg-gradient-to-r from-green-500 to-green-600 text-white shadow-lg'
                                    : 'bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white shadow-lg transform hover:scale-105'
                                }`}
                              >
                                {isSetCompleted(exercise.name, setNum) ? '‚úì' : '‚óã'}
                              </button>
                            </div>
                          ))}
                        </div>
                      </div>
                    ))}
                  </div>
                </div>
              </>
            )}
            {/* Progress Tab */}
            {activeTab === 'progress' && (
              <div className="bg-gradient-to-br from-gray-800/50 to-gray-900/50 backdrop-blur-xl rounded-3xl p-6 shadow-2xl border border-gray-700/50">
                <h2 className="text-2xl font-bold mb-6 flex items-center text-white">
                  <span className="mr-3 text-3xl">üìà</span>
                  Workout History
                </h2>
                {workoutHistory.length === 0 ? (
                  <div className="text-center py-12">
                    <div className="text-6xl mb-4">üí™</div>
                    <p className="text-xl text-gray-400 mb-2">No workouts yet</p>
                    <p className="text-gray-500">Start your fitness journey today!</p>
                  </div>
                ) : (
                  <div className="space-y-3">
                    {workoutHistory.slice(-20).reverse().map((workout, index) => (
                      <div key={index} className="bg-gradient-to-r from-gray-900/60 to-gray-800/60 p-4 rounded-2xl border border-gray-600/30 backdrop-blur-sm">
                        <div className="flex justify-between items-center">
                          <div className="flex items-center space-x-3">
                            <div className="w-12 h-12 bg-gradient-to-br from-red-500 to-red-600 rounded-xl flex items-center justify-center text-xl">
                              {workoutPlan[workout.day]?.emoji || 'üí™'}
                            </div>
                            <div>
                              <h3 className="font-semibold text-white">{workout.workout}</h3>
                              <p className="text-sm text-gray-400 capitalize">{workout.day}</p>
                            </div>
                          </div>
                          <div className="text-right">
                            <p className="text-sm text-gray-400">{workout.date}</p>
                            <p className="text-sm font-semibold text-green-400">{workout.completedSets} sets completed</p>
                          </div>
                        </div>
                      </div>
                    ))}
                  </div>
                )}
              </div>
            )}
            {/* Settings Tab */}
            {activeTab === 'settings' && (
              <div className="bg-gradient-to-br from-gray-800/50 to-gray-900/50 backdrop-blur-xl rounded-3xl p-6 shadow-2xl border border-gray-700/50">
                <h2 className="text-2xl font-bold mb-6 flex items-center text-white">
                  <span className="mr-3 text-3xl">‚öôÔ∏è</span>
                  One Rep Maxes
                </h2>
                <div className="space-y-4">
                  {Object.entries(oneRepMaxes).map(([lift, weight]) => (
                    <div key={lift} className="bg-gradient-to-r from-gray-900/60 to-gray-800/60 p-4 rounded-2xl border border-gray-600/30 backdrop-blur-sm">
                      <div className="flex items-center justify-between">
                        <label className="text-lg font-semibold capitalize text-white flex items-center space-x-3">
                          <div className="w-10 h-10 bg-gradient-to-br from-red-500 to-red-600 rounded-lg flex items-center justify-center text-xl">
                            {lift === 'bench' ? 'üèãÔ∏è' : lift === 'deadlift' ? 'üíÄ' : 'ü¶µ'}
                          </div>
                          <span>{lift}:</span>
                        </label>
                        <div className="flex items-center space-x-3">
                          <input
                            type="number"
                            value={weight}
                            onChange={(e) => setOneRepMaxes(prev => ({
                              ...prev,
                              [lift]: parseFloat(e.target.value) || 0
                            }))}
                            className="w-24 px-4 py-3 bg-black/50 border border-gray-600 rounded-xl text-white text-center font-bold focus:border-red-500 focus:ring-2 focus:ring-red-500/20"
                          />
                          <span className="text-gray-300 font-semibold">kg</span>
                        </div>
                      </div>
                    </div>
                  ))}
                </div>
                <div className="mt-6 p-4 bg-gradient-to-r from-blue-900/20 to-purple-900/20 border border-blue-500/30 rounded-2xl backdrop-blur-sm">
                  <div className="flex items-center space-x-3">
                    <span className="text-2xl">üíæ</span>
                    <p className="text-sm text-blue-200">
                      Your data is saved locally in your browser and will be available after reloading the page!
                    </p>
                  </div>
                </div>
              </div>
            )}
          </div>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<WorkoutTracker />);
  </script>
</body>
</html>
